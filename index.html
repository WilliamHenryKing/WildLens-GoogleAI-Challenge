<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Echo Location</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Sen:wght@700;800&display=swap" rel="stylesheet">
    
    <style>
      :root {
        /* Savanna Dawn (Light Theme) */
        --color-bg: #FFF8EF;
        --color-surface: #FFF3E0;
        --color-text-ink: #1B140F;
        --color-text-muted: #4A3A2E;
        --color-primary: #2E7D4F;
        --color-primary-pressed: #276C45;
        --color-secondary: #C75C3A;
        --color-accent-sky: #53A6E1;
        --color-accent-gold: #F2A900;
        --color-neutral-sand: #E5D1B8;
        --color-neutral-dune: #EDE4D8;
        --color-outline: #BFA48C;
        --color-danger: #D93434;
        --color-danger-surface: #FAE8E8;
      }
      [data-theme="dark"] {
        /* Saharan Dusk (Dark Theme) */
        --color-bg: #1A1410;
        --color-surface: #231A15;
        --color-text-ink: #F7EFE6;
        --color-text-muted: #C9B8A7;
        --color-primary: #3DAA6A;
        --color-primary-pressed: #2E8B57;
        --color-secondary: #E47A47;
        --color-accent-aqua: #6FFFE9;
        --color-accent-magenta: #FF4D9A;
        --color-neutral-sand: #3A2E26;
        --color-neutral-dune: #2C221C;
        --color-outline: #4A382D;
        --color-danger: #E54848;
        --color-danger-surface: #3E2424;
      }

      body {
        font-family: 'Manrope', sans-serif;
        background-color: var(--color-bg);
        color: var(--color-text-ink);
        transition: background-color 0.3s var(--ease-sand), color 0.3s var(--ease-sand);
      }

      /* Custom Scrollbars */
      .custom-scrollbar::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: transparent;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background-color: var(--color-outline);
        border-radius: 4px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background-color: var(--color-secondary);
      }
      .custom-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: var(--color-outline) transparent;
      }

      /* SoundWaveAnimation CSS */
      .wave-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        width: 100%;
        gap: 4px;
      }

      .wave-bar {
        width: 6px;
        height: 100%;
        background: linear-gradient(180deg, var(--color-primary), var(--color-secondary), var(--color-accent-gold));
        border-radius: 3px;
        transform-origin: bottom;
        animation-name: breathe;
        animation-iteration-count: infinite;
        animation-timing-function: ease-in-out;
      }

      @keyframes breathe {
        0% { transform: scaleY(0.1); }
        50% { transform: scaleY(1); }
        100% { transform: scaleY(0.1); }
      }

      .wave-bar:nth-child(1) {
        animation-duration: 1.2s;
        animation-delay: 0.1s;
      }
      .wave-bar:nth-child(2) {
        animation-duration: 1.5s;
        animation-delay: 0.3s;
      }
      .wave-bar:nth-child(3) {
        animation-duration: 1.1s;
        animation-delay: 0.6s;
      }
      .wave-bar:nth-child(4) {
        animation-duration: 1.7s;
        animation-delay: 0.4s;
      }
      .wave-bar:nth-child(5) {
        animation-duration: 1.4s;
        animation-delay: 0.2s;
      }

      /* Field Report UI styles */
      .field-report-glow {
        box-shadow: 0 0 15px rgba(5, 150, 255, 0.2), inset 0 0 5px rgba(5, 150, 255, 0.1);
      }
      [data-theme="dark"] .field-report-bg {
        background: linear-gradient(145deg, rgba(35, 26, 21, 0.8), rgba(26, 20, 16, 0.9));
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }
      [data-theme="light"] .field-report-bg {
         background: linear-gradient(145deg, rgba(255, 243, 224, 0.8), rgba(255, 248, 239, 0.9));
         backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      /* Hub - Org Card Styles */
      .org-card {
        transition: all 0.3s ease;
      }
      .org-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--warm-lg);
      }
      .focus-tag {
        display: inline-block;
        padding: 4px 10px;
        margin: 4px;
        border-radius: 9999px;
        font-size: 0.8rem;
        font-weight: 600;
        background-color: var(--color-primary);
        color: white;
      }

      /* General & Polish Animations */
      @keyframes fade-in-up-stagger {
        from { opacity: 0; transform: translateY(15px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-stagger-in {
        animation: fade-in-up-stagger 0.5s ease-out both;
      }
      
      @keyframes fade-in-up-modal {
        from { opacity: 0; transform: translateY(20px) scale(0.98); }
        to { opacity: 1; transform: translateY(0) scale(1); }
      }
      .animate-fade-in-up {
        animation: fade-in-up-modal 0.3s ease-out forwards;
      }
      
      @keyframes fade-in-down {
        from { opacity: 0; transform: translateY(-20px) scale(0.98); }
        to { opacity: 1; transform: translateY(0) scale(1); }
      }
      .animate-fade-in-down {
        animation: fade-in-down 0.4s ease-out forwards;
      }

      /* XP Gain Indicator */
      @keyframes xp-gain-anim {
        0% { transform: translateY(0) scale(0.8); opacity: 1; }
        100% { transform: translateY(-60px) scale(1.2); opacity: 0; }
      }
      .xp-gain-indicator {
        animation: xp-gain-anim 1.5s ease-out forwards;
      }

      /* Pulsing Heart Animation */
      @keyframes pulse-heart {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.15); }
      }
      .animate-pulse-heart {
        animation: pulse-heart 2s infinite cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* Confetti Background */
      .confetti-bg {
        background-color: transparent;
        background-image:
            url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E%3Cpath fill-opacity='0.7' fill='%232E7D4F' d='M0 5 L5 0 L10 5 L5 10 Z'/%3E%3C/svg%3E"),
            url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E%3Ccircle fill-opacity='0.7' fill='%23C75C3A' cx='10' cy='10' r='5'/%3E%3C/svg%3E"),
            url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E%3Crect fill-opacity='0.7' fill='%23F2A900' x='5' y='5' width='10' height='10' transform='rotate(45 10 10)'/%3E%3C/svg%3E"),
            url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='15' height='15' viewBox='0 0 15 15'%3E%3Cpath fill-opacity='0.7' fill='%2353A6E1' d='M7.5 0 L9.15 5.85 L15 5.85 L10.42 9.45 L12.08 15 L7.5 11.4 L2.92 15 L4.58 9.45 L0 5.85 L5.85 5.85 Z'/%3E%3C/svg%3E");
        background-size: 15px, 20px, 15px, 20px;
        background-repeat: repeat;
        animation: confetti-fall 10s linear infinite;
      }
      @keyframes confetti-fall {
          from { background-position: 0 0, 10px 20px, 20px 10px, 5px 15px; }
          to { background-position: 0 500px, 10px 520px, 20px 510px, 5px 515px; }
      }
    </style>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              headline: ['Sen', 'sans-serif'],
              body: ['Manrope', 'sans-serif'],
            },
            colors: {
              bg: 'var(--color-bg)',
              surface: 'var(--color-surface)',
              ink: 'var(--color-text-ink)',
              muted: 'var(--color-text-muted)',
              primary: {
                DEFAULT: 'var(--color-primary)',
                pressed: 'var(--color-primary-pressed)',
              },
              secondary: 'var(--color-secondary)',
              sky: 'var(--color-accent-sky)',
              gold: 'var(--color-accent-gold)',
              aqua: 'var(--color-accent-aqua)',
              magenta: 'var(--color-accent-magenta)',
              sand: 'var(--color-neutral-sand)',
              dune: 'var(--color-neutral-dune)',
              outline: 'var(--color-outline)',
              danger: {
                DEFAULT: 'var(--color-danger)',
                surface: 'var(--color-danger-surface)',
              },
            },
            borderRadius: {
              'xl': '12px',
              '2xl': '16px',
              '3xl': '20px',
            },
            boxShadow: {
              'warm-md': '0 4px 6px -1px rgba(74, 58, 46, 0.1), 0 2px 4px -2px rgba(74, 58, 46, 0.1)',
              'warm-lg': '0 10px 15px -3px rgba(74, 58, 46, 0.1), 0 4px 6px -4px rgba(74, 58, 46, 0.1)',
              'warm-xl': '0 20px 25px -5px rgba(74, 58, 46, 0.1), 0 8px 10px -6px rgba(74, 58, 46, 0.1)',
            }
          }
        }
      }
    </script>
    <script type="importmap">
      {
        "imports": {
          "react/": "https://aistudiocdn.com/react@^19.1.1/",
          "react": "https://aistudiocdn.com/react@^19.1.1",
          "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
          "@google/genai": "https://aistudiocdn.com/@google/genai@^1.17.0",
          "three": "https://aistudiocdn.com/three@^0.168.0",
          "react-globe.gl": "https://aistudiocdn.com/react-globe.gl@^2.32.7"
        }
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>